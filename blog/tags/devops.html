
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#f98521">

    <title>DevOps &ndash; Joyful Bikeshedding</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="/stylesheets/site-7224e35b.css" rel="stylesheet" />

        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">

    <noscript>
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,400italic|Roboto+Mono:400|PT+Sans:400,700|PT+Serif:400" rel="stylesheet">
    </noscript>
    <link rel="preconnect" href="http://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="https://ajax.googleapis.com" crossorigin>
    <link rel="shortcut icon" href="/images/favicon-1b152eac.png" type="image/png" />

    
    
</head>
<body>

    <header class="site-navbar site-navbar-small">
    <div class="nav-hero-container" role="banner">
        <a href="/" aria-hidden="true" class="logo-link"><img src="/images/avatar-b64f1ad5.png" srcset="/images/avatar-b64f1ad5.png 1x, /images/avatar@2x-693176a2.png 2x" class="logo" alt="Hongli Lai" /></a>

        <div class="nav-text-container">
            <div class="title"><a href="/" class="title-link">Joyful <br>Bikeshedding</a></div>
            <div class="subtitle"><a href="/" class="title-link">CTO's take on coding<br>&amp; company building</a></div>
        </div>
    </div>

    <nav class="nav-list-container">
        <ul class="nav-list">
            <li class="nav-item">
    <a class="nav-link" href="/">Blog</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/tags/featured.html">Featured Posts</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/work_and_open_source.html">My Work</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/about.html">About</a>
</li>
<li class="nav-item nav-item-with-image">
    <a href="/feed.xml" class="nav-link" title="RSS"><img src="/images/rss-8aadb988.svg" height="14" alt="RSS" /></a>
</li>
<!--
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://github.com/FooBarWidget" target="_blank"><img src="/images/github-button.svg" width="30" height="30" alt="Github" title="Github" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://twitter.com/honglilai" target="_blank"><img src="/images/twitter-button.svg" width="30" height="30" alt="Twitter" title="Twitter" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://www.linkedin.com/in/honglilai" target="_blank"><img src="/images/linkedin-button.svg" width="30" height="30" alt="LinkedIn" title="LinkedIn" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://keybase.io/foobarwidget" target="_blank"><img src="/images/keybase-button.svg" width="30" height="30" alt="Keybase" title="Keybase" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image site-nav-item-with-image-squared">
    <a class="site-nav-link" href="mailto:hongli@hongli.nl"><img src="/images/email-button.svg" width="30" height="30" alt="Email" title="Email" /></a>
</li>
-->
        </ul>
    </nav>
</header>

    <header class="site-navbar site-navbar-large" style="display: none">
    <div class="nav-hero-container">
        <a href="/" role="banner" class="logo-link"><img src="/images/avatar-b64f1ad5.png" srcset="/images/avatar-b64f1ad5.png 1x, /images/avatar@2x-693176a2.png 2x" class="logo" alt="Hongli Lai" /></a>

        <div class="nav-text-container">
            <div class="title" role="banner"><a href="/" class="title-link">Joyful Bikeshedding</a></div>
            <div class="subtitle" role="banner"><a href="/" class="title-link">CTO's take on coding &amp; company building</a></div>
            <nav class="nav-list-container">
                <ul class="nav-list">
                    <li class="nav-item">
    <a class="nav-link" href="/">Blog</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/tags/featured.html">Featured Posts</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/work_and_open_source.html">My Work</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/about.html">About</a>
</li>
<li class="nav-item nav-item-with-image">
    <a href="/feed.xml" class="nav-link" title="RSS"><img src="/images/rss-8aadb988.svg" height="14" alt="RSS" /></a>
</li>
<!--
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://github.com/FooBarWidget" target="_blank"><img src="/images/github-button.svg" width="30" height="30" alt="Github" title="Github" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://twitter.com/honglilai" target="_blank"><img src="/images/twitter-button.svg" width="30" height="30" alt="Twitter" title="Twitter" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://www.linkedin.com/in/honglilai" target="_blank"><img src="/images/linkedin-button.svg" width="30" height="30" alt="LinkedIn" title="LinkedIn" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image">
    <a class="site-nav-link" href="https://keybase.io/foobarwidget" target="_blank"><img src="/images/keybase-button.svg" width="30" height="30" alt="Keybase" title="Keybase" /></a>
</li>
<li class="site-nav-item site-nav-item-with-image site-nav-item-with-image-squared">
    <a class="site-nav-link" href="mailto:hongli@hongli.nl"><img src="/images/email-button.svg" width="30" height="30" alt="Email" title="Email" /></a>
</li>
-->
                </ul>
            </nav>
        </div>
    </div>
</header>


      <main class="main-container main-container-with-post-previews">
    <header class="page-display-header">
      <h1>DevOps</h1>
      <hr>
    </header>

    <section class="post-previews">
          <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2020-08-03-how-debian-packaging-works.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;2020&#x2F;how-debian-packaging-works-7d4c3891.jpg" type="image&#x2F;jpeg">
        <img
          src="&#x2F;images&#x2F;2020&#x2F;how-debian-packaging-works-7d4c3891.jpg"
          style=""
          title=""
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2020-08-03-how-debian-packaging-works.html">How Debian packaging works</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2020-08-03">Aug  3, 2020</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/linux.html">Linux</a>, <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/packaging.html">Packaging</a>, <a href="/blog/tags/debian-packaging.html">Debian packaging</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>Debian packaging can be quite mysterious and hard to figure out. In this guide I'll provide a simple introduction into the Debian packaging process and its most important concepts.</p>

<p>This is not a full guide into all aspects of packaging. Instead, I'll cover just enough of the basics to help you develop a mental model of what Debian packaging is about, and to be able to produce useful results.</p>

<p>I'll cover:</p>

<ul>
  <li>What a Debian package is.</li>
  <li>The anatomy of a package.</li>
  <li>How to inspect a package.</li>
  <li>How to create a package.</li>
  <li>What APT repositories are.</li>
  <li>How to create an APT repository.</li>
</ul>

<p><strong><em></em></strong></p>
            <div class="post-read-more"><a href="/blog/2020-08-03-how-debian-packaging-works.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>
    <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2020-07-21-why-piping-to-cat-can-stuck-a-ci-job.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;2020&#x2F;stuck-cat-4a05c666.jpg" type="image&#x2F;jpeg">
        <img
          src="&#x2F;images&#x2F;2020&#x2F;stuck-cat-4a05c666.jpg"
          style=""
          title=""
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2020-07-21-why-piping-to-cat-can-stuck-a-ci-job.html">Why piping to &#x27;cat&#x27; can stuck a CI job ðŸ™€</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2020-07-21">Jul 21, 2020</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/shell-scripting.html">Shell scripting</a>, <a href="/blog/tags/debugging.html">Debugging</a>, <a href="/blog/tags/unix.html">Unix</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>What's the difference between <code>command</code> and <code>command | cat</code>? There shouldn't be any, right? The first prints the output directly, and the latter prints output via cat, but they should have the same effect. Not so: the latter can cause the command to get stuck indefinitely. This has given a particular CI pipeline of mine quite some headache.</p>

<p>To learn why this happens, and how we can mitigate this problem, we need to dive into the arcane magic that is Unix process management. Join me on this journey.</p>

<p><strong></strong></p>
            <div class="post-read-more"><a href="/blog/2020-07-21-why-piping-to-cat-can-stuck-a-ci-job.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>
    <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2018-04-28-practices-of-modern-application-management-and-delivery-part-1.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;stock-bg&#x2F;starline-yellow-comic-b8b19e55.jpg" type="image&#x2F;jpeg">
        <img
          src="&#x2F;images&#x2F;stock-bg&#x2F;starline-yellow-comic-b8b19e55.jpg"
          style=""
          title="Background vector created by @StarLine - Freepik.com"
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2018-04-28-practices-of-modern-application-management-and-delivery-part-1.html">Practices of modern application management and delivery, part 1</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2018-04-28">Apr 28, 2018</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/software-development.html">Software development</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>The development and deployment of modern apps is very different from how it used to be. Networked applications are now very common. Development at scale is now common: hundreds of developers working on a system, which may be split into many microservices. Deployment at scale is now also common: apps serving millions of users. Various practices emerged, or became popular, to deal with these new challenges. I've learned many practices over the past decade, but resources that describe these practices appear to be scattered. This post is an attempt to inventorize the various practices that are used for the development, deployment and management of modern apps.</p>

<p><strong></strong></p>
            <div class="post-read-more"><a href="/blog/2018-04-28-practices-of-modern-application-management-and-delivery-part-1.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>
    <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2018-03-26-studying-the-kubernetes-ingress-system.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;2018&#x2F;kubernetes-banner-884590a9.jpg" type="image&#x2F;jpeg">
        <img
          src="&#x2F;images&#x2F;2018&#x2F;kubernetes-banner-884590a9.jpg"
          style=""
          title=""
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2018-03-26-studying-the-kubernetes-ingress-system.html">Studying the Kubernetes Ingress system</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2018-03-26">Mar 26, 2018</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/kubernetes.html">Kubernetes</a>, <a href="/blog/tags/research.html">Research</a>, <a href="/blog/tags/featured.html">Featured posts</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>I have been researching how the Kubernetes Ingress system works. My use case is to setup an autoscaled Nginx cluster that reverse proxies to Pods in multiple Deployments. It wasn't immediately obvious how to do this. By default, Pods in Kubernetes are not supposed to be reachable from outside the cluster. One makes them reachable either by associating those pods with a Service of the right type (i.e. either NodePort or LoadBalancer), or by defining an Ingress. But what <em>is</em> an Ingress? How do I put Nginx in between an Ingress and a set of Pods? This post describes my journey through the jargon-loaded Kubernetes documentation which does not hold any hands, as well as my journey through the Kubernetes source code, all in a quest to find answers.</p>

<p>This post a bit long, so if you just want a summary then you can skip straight to the conclusion at the bottom.</p>

<figure>
    <img src="/images/2018/kubernetes-nginx-ingress-problem-c3c7516d.png" alt="">
    <figcaption>Defining a Service is straightforward enough... but how do you point Nginx to that? And how does Nginx relate to this Ingress thing?</figcaption>
</figure>

<p><strong></strong></p>
            <div class="post-read-more"><a href="/blog/2018-03-26-studying-the-kubernetes-ingress-system.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>
    <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2018-03-24-appreciating-prometheus.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;stock-bg&#x2F;freepik-colorful-fac573ed.jpg" type="image&#x2F;jpeg">
        <img
          src="&#x2F;images&#x2F;stock-bg&#x2F;freepik-colorful-fac573ed.jpg"
          style=""
          title="Background vector created by Freepik"
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2018-03-24-appreciating-prometheus.html">In appreciation of Prometheus&#x27; engineering</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2018-03-24">Mar 24, 2018</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/prometheus.html">Prometheus</a>, <a href="/blog/tags/monitoring.html">Monitoring</a>, <a href="/blog/tags/featured.html">Featured posts</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>Even though I rejected <a href="https://prometheus.io/">Prometheus</a> as a choice in my <a href="/blog/2018-03-22-netdata-simple-server-monitoring.html">last blog post about Netdata</a>, I actually appreciate Prometheus' engineering quality. From its documentation it is apparent that the authors are very experienced on the subject and have thought through things.</p>

<p>This post reviews some of the things that demonstrate that, namely their responses to the push vs pull debacle, the way they limit Prometheus' scope, the way their alerting system is designed and documented, and the way they treat storage.</p>

<p><strong></strong></p>
            <div class="post-read-more"><a href="/blog/2018-03-24-appreciating-prometheus.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>
    <article class="post part-of-preview">
        <header class="post-header part-of-preview">
            <a href="/blog/2018-03-22-netdata-simple-server-monitoring.html" aria-hidden="true" class="post-banner preview">
      <picture>
        <source srcset="&#x2F;images&#x2F;2018&#x2F;netdata-60037a24.png" type="image&#x2F;png">
        <img
          src="&#x2F;images&#x2F;2018&#x2F;netdata-60037a24.png"
          style="background-position: top"
          title=""
          class="bg">
      </picture>
    </a>
            <h2 class="title"><a href="/blog/2018-03-22-netdata-simple-server-monitoring.html">Netdata: simple server monitoring</a></h2>
            <div class="meta-container">
                <div class="meta-main-area">
                    <ul class="meta-list">
                        <li class="meta-item">
                            <a href="/about.html" class="author-display-name-link">By Hongli Lai</a>
                        </li>
                        <li class="meta-item">
                            <time datetime="2018-03-22">Mar 22, 2018</time>
                        </li>
                        <li class="meta-item">
                            <a href="/blog/tags/devops.html">DevOps</a>, <a href="/blog/tags/netdata.html">Netdata</a>, <a href="/blog/tags/monitoring.html">Monitoring</a>, <a href="/blog/tags/featured.html">Featured posts</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="post-content post-content-preview part-of-preview">
            <p>I have been looking for an easy-to-use monitoring solution for Phusion's servers. One that does not require a lot of setup and that provides a reasonable interface without too much work. Such a solution has to display a bunch of graphs at the very least. (Email) alerting is considered a bonus. The solution also has to be open source, not only because of the cost factor but because I want to own my data. So solutions like New Relic and Datadog are out.</p>

<p>In this blog post I will describe the solutions that I've checked out â€“ Ganglia, Monit, Munin, Prometheus, Grafana â€“ and why I didn't like them. Then I will explain why I think <a href="https://my-netdata.io/">Netdata</a> is a good choice and review its pros and cons.</p>

<p><strong></strong></p>
            <div class="post-read-more"><a href="/blog/2018-03-22-netdata-simple-server-monitoring.html" class="outline-button orange">Read more &raquo;</a></div>
        </div>
    </article>

    </section>

      

    <aside class="about-me-panel-container after-post-previews">
      <div class="about-me-panel after-post-previews">
    <div class="message-area">
        <h2 class="heading">Hi, I'm Hongli Lai</h2>
        <p>
            I'm a software developer, consultant, CTO and entrepreneur. I mentor people to help them grow. For 20 years Iâ€™ve been building tools that make people happy. I believe that software development and work should be fun.
        </p>
        <p><a href="/about.html" class="outline-button orange">About Hongli</a></p>
    </div>
    <div class="image-area">
        <a href="/about.html"><img src="/images/profile-3c15ec0c.jpg" width="128" height="128" class="profile-image" alt="Hongli Lai" /></a>
    </div>
</div>

    </aside>
  </main>


    <footer class="site-footer">
        <div class="container">
            <h2 class="heading">
                    <span class="preamble">You are reading</span>
                <span class="title">Joyful Bikeshedding</span>
            </h2>
            <div class="subscribe-action"><a href="/feed.xml" class="outline-button white prominent">subscribe by RSS</a></div>
            <div class="social-media-follow-action"><a href="/about.html#contact">or check me out on social media</a></div>

            <div class="legal-boilerplate">
                <p>Twitter icon made by <a href="https://www.flaticon.com/authors/elegant-themes">Elegant Themes</a>, Github icon made by <a href="https://www.flaticon.com/authors/dave-gandy">Dave Gandy</a>. These are licensed by <a href="http://creativecommons.org/licenses/by/3.0/">CC 3.0 BY</a>.</p>
            </div>
        </div>
    </footer>

    <!--
      Unfortunately Google Fonts does not allow setting font-display.
      Force loading of fonts using the 'font swap period' strategy.
     -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
        WebFont.load({ google: { families: [
            'Roboto:400,700,400italic',
            'Roboto Mono:400',
            'PT Sans:400,700',
            'PT Serif:400'
        ] } });
    </script>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116211414-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-116211414-1', { anonymize_ip: true });
        </script>

        <script async src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
        <script>
        window.addEventListener("load", function(){
        window.cookieconsent.initialise({
          "palette": {
            "popup": {
              "background": "#efefef",
              "text": "#404040"
            },
            "button": {
              "background": "#F7A51A",
              "text": "#ffffff"
            }
          },
          "position": "bottom-right",
          "content": {
            "message": "This website uses cookies for anonymous visitor analytics."
          }
        })});
        </script>
</body>
</html>
